<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liter√°rn√≠ Rozbor Manager (Dle zad√°n√≠)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fc;
        }
        .container {
            max-width: 1200px;
        }
        h1 {
            border-bottom: 2px solid #3b82f6;
            padding-bottom: 0.5rem;
        }
        h2 {
            margin-top: 1.5rem;
            color: #1d4ed8;
        }
        h3 {
            border-left: 4px solid #93c5fd;
            padding-left: 0.75rem;
            margin-top: 1rem;
            font-weight: 600;
        }
        label {
            font-weight: 500;
            display: block;
            margin-top: 1rem;
            margin-bottom: 0.25rem;
            color: #374151;
        }
        input[type="text"], textarea {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
            transition: border-color 0.2s;
        }
        input[type="text"]:focus, textarea:focus {
            border-color: #3b82f6;
            outline: none;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }
        textarea {
            min-height: 80px;
        }
        .section-box {
            background-color: #ffffff;
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }
        .btn {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
            text-align: center;
            height: 48px; 
            display: flex;
            justify-content: center;
            align-items: center;
            flex-grow: 1; 
            white-space: nowrap; 
        }
        .btn-primary { background-color: #3b82f6; color: white; }
        .btn-primary:hover { background-color: #2563eb; }
        .btn-secondary { background-color: #6b7280; color: white; }
        .btn-secondary:hover { background-color: #4b5563; }
        .btn-green { background-color: #10b981; color: white; }
        .btn-green:hover { background-color: #059669; }
        .btn-red { background-color: #ef4444; color: white; }
        .btn-red:hover { background-color: #dc2626; }

        .copy-btn {
            background-color: #3b82f6;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .copy-btn:hover {
            background-color: #2563eb;
        }
        .result-container {
            background-color: #f3f4f6;
            border: 1px solid #d1d5db;
            padding: 1rem;
            border-radius: 0.5rem;
            white-space: pre-wrap;
            font-family: 'Courier New', Courier, monospace; 
            color: #1f2937;
        }
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            width: 80%; 
            max-width: 1000px;
            max-height: 90%;
            overflow-y: auto;
            position: relative;
        }
        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #ef4444;
        }
        .review-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            border-bottom: 1px solid #e5e7eb;
        }
        .review-item:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body class="p-4 sm:p-8">
    <div id="auth-info" class="text-xs text-right mb-2 text-gray-500">
        Status: Lok√°ln√≠ √∫lo≈æi≈°tƒõ (localStorage) je aktivn√≠.
    </div>

    <div class="container mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8 relative">
        
        <div class="lg:col-span-2">
            <h1 class="text-3xl font-bold text-gray-800 mb-6">üìù Spr√°vce Rozbor≈Ø (Dle zad√°n√≠)</h1>
            <p class="text-gray-600 mb-6">Va≈°e pr√°ce se ukl√°d√° automaticky do prohl√≠≈æeƒçe.</p>

            <form id="analysis-form" class="space-y-6">

                <!-- I. TEXT A JEHO SLO≈ΩKY -->
                <div class="section-box">
                    <h2 class="text-2xl font-semibold mb-4">1. Liter√°rn√≠ druh a ≈æ√°nr</h2>
                    <input type="hidden" id="edit-index">
                    
                    <label for="nazev_dila">N√°zev d√≠la:</label>
                    <input type="text" id="nazev_dila" placeholder="Nap≈ô. Kytice" required>
                    
                    <label for="autor">Autor:</label>
                    <input type="text" id="autor" placeholder="Nap≈ô. Karel Jarom√≠r Erben" required>

                    <label for="literarni_druh">Liter√°rn√≠ druh (lyrika, pr√≥za, drama...):</label>
                    <input type="text" id="literarni_druh">

                    <label for="literarni_zanr">Liter√°rn√≠ ≈æ√°nr (rom√°n, balada...):</label>
                    <input type="text" id="literarni_zanr">

                    <h2 class="text-2xl font-semibold mt-6 mb-4">2. Kontext</h2>
                    <label for="kontext_autora">Autor, recepce, obdob√≠, smƒõr:</label>
                    <textarea id="kontext_autora" placeholder="Informace o autorovi, p≈ôijet√≠ d√≠la, liter√°rn√≠ smƒõr."></textarea>
                </div>

                <!-- II. OBSAH -->
                <div class="section-box">
                    <h2 class="text-2xl font-semibold mb-4">3. Obsah</h2>
                    
                    <h3 class="text-lg">A. T√©ma</h3>
                    <label for="hlavni_tema">Hlavn√≠ a vedlej≈°√≠ t√©ma:</label>
                    <textarea id="hlavni_tema" placeholder="O ƒçem d√≠lo je (hlavn√≠ i vedlej≈°√≠ t√©mata)."></textarea>

                    <h3 class="text-lg">B. Vƒõcn√Ω obsah</h3>
                    <label for="hlavni_postavy">Postavy (hlavn√≠/vedlej≈°√≠, charakteristika, vztahy):</label>
                    <textarea id="hlavni_postavy" placeholder="Jac√≠ jsou, proƒç takov√≠ jsou, jak se mƒõn√≠."></textarea>
                    
                    <label for="vypravec">Vypravƒõƒç / Lyrick√Ω subjekt:</label>
                    <input type="text" id="vypravec" placeholder="Ich-forma, v≈°evƒõdouc√≠, vztah ke ƒçten√°≈ôi.">
                    
                    <label for="casoprostor">ƒåasoprostor (ƒças a prost≈ôed√≠):</label>
                    <textarea id="casoprostor" placeholder="M√≠stn√≠ a soci√°ln√≠ prost≈ôed√≠, doba dƒõje."></textarea>

                    <label for="dej">Dƒõj/Dƒõn√≠:</label>
                    <textarea id="dej" placeholder="P≈ôevypr√°vƒõn√≠, kl√≠ƒçov√© motivy, z√°pletka, rozuzlen√≠."></textarea>
                    
                    <label for="myslenkovy_obsah">My≈°lenkov√Ω a emoƒçn√≠ obsah:</label>
                    <textarea id="myslenkovy_obsah" placeholder="Vidƒõn√≠ svƒõta, ponauƒçen√≠, smysl, celkov√© p≈Øsoben√≠."></textarea>
                </div>

                <!-- III. FORMA -->
                <div class="section-box">
                    <h2 class="text-2xl font-semibold mb-4">4. Forma</h2>

                    <h3 class="text-lg">A. Kompozice</h3>
                    <label for="clneni_textu">ƒålenƒõn√≠ textu (kapitoly, strofy, dƒõjstv√≠):</label>
                    <input type="text" id="clneni_textu">

                    <label for="slohove_postupy">Slohov√© postupy (vypr√°vƒõn√≠, popis, √∫vaha...):</label>
                    <input type="text" id="slohove_postupy" placeholder="Jejich kombinace, detailnost/n√°znakovost.">

                    <label for="kompozicni_postupy">Kompoziƒçn√≠ postupy (chronologick√Ω, retrospektivn√≠...):</label>
                    <input type="text" id="kompozicni_postupy">
                    
                    <label for="kompozicni_principy">Kompoziƒçn√≠ principy (opakov√°n√≠, kontrast...):</label>
                    <input type="text" id="kompozicni_principy">
                
                    <h3 class="text-lg mt-4">B. V√Ωrazov√© prost≈ôedky</h3>
                    <label for="neverbalni">Neverb√°ln√≠ (ilustrace, grafika):</label>
                    <input type="text" id="neverbalni">

                    <label for="verbalni">Verb√°ln√≠ (jazyk, slovn√≠ z√°soba):</label>
                    <textarea id="verbalni" placeholder="Spisovnost, archaismy, citov√© zabarven√≠, syntax, slovn√≠ druhy..."></textarea>
                    
                    <label for="figury_tropy">Figury a Tropy:</label>
                    <textarea id="figury_tropy" placeholder="Metafory, metonymie, anafory..."></textarea>
                </div>

                <!-- IV. KOMENT√Å≈ò -->
                <div class="section-box">
                    <h2 class="text-2xl font-semibold mb-4">5. KOMENT√Å≈ò (Jak o textu p≈ôem√Ω≈°let)</h2>
                    
                    <label for="analyza">Anal√Ωza:</label>
                    <textarea id="analyza" placeholder="Charakteristika slo≈æek textu (rozklad)."></textarea>
                    
                    <label for="vyklad">V√Ωklad (PROƒå to tak je, SMYSL):</label>
                    <textarea id="vyklad" placeholder="Proƒç autor zvolil tento ≈æ√°nr? Proƒç se postavy chovaj√≠ takto? Smysl a v√Ωznam."></textarea>
                    
                    <label for="hodnoceni">Hodnocen√≠:</label>
                    <textarea id="hodnoceni" placeholder="Posouzen√≠ klad≈Ø a z√°por≈Ø."></textarea>
                </div>

                <div class="flex justify-center">
                    <button type="submit" class="btn btn-primary" id="save-button">Ulo≈æit / Aktualizovat Rozbor</button>
                    <button type="button" onclick="resetForm()" class="btn btn-secondary ml-4">Vytvo≈ôit Nov√Ω Rozbor</button>
                </div>
            </form>
        </div>

        <!-- Prav√Ω sloupec - P≈ôehled -->
        <div class="lg:col-span-1">
            <div class="sticky top-8">
                <div class="section-box bg-white p-4">
                    <h2 class="text-xl font-bold mb-4 border-b pb-2">Ulo≈æen√© rozbory (<span id="count">0</span>/20)</h2>
                    <div id="review-list" class="divide-y divide-gray-200 min-h-[150px] max-h-[400px] overflow-y-auto">
                        <!-- Dynamic content -->
                    </div>
                </div>

                <div class="mt-8 flex flex-col space-y-4">
                    <button onclick="generateFinalLatex()" class="btn btn-green">Vygenerovat LaTeX Sborn√≠k</button>
                    <button onclick="clearAll()" class="btn btn-red">Vymazat V≈°echna Lok√°ln√≠ Data</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL -->
    <div id="result-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <h2 class="text-3xl font-bold text-gray-800 mb-4 border-b pb-2">Vygenerovan√Ω LaTeX Sborn√≠k</h2>
            <p class="text-gray-600 mb-4">Zkop√≠rujte k√≥d do Overleafu (XeLaTeX).</p>
            <button class="copy-btn mb-4" onclick="copyResultText()">Kop√≠rovat K√≥d</button>
            <textarea id="result-text" class="w-full h-96 p-4 result-container" readonly></textarea>
        </div>
    </div>

    <script>
        const DB_KEY = 'maturitniRozboryV2';
        let storedAnalyses = [];

        // --- LOCAL STORAGE ---
        function loadAnalyses() {
            try {
                const data = localStorage.getItem(DB_KEY);
                storedAnalyses = data ? JSON.parse(data) : [];
            } catch (e) { storedAnalyses = []; }
            renderReviewList();
        }

        function saveAnalyses() {
            try { localStorage.setItem(DB_KEY, JSON.stringify(storedAnalyses)); } 
            catch (e) { alertMessage("Chyba p≈ôi ukl√°d√°n√≠ (√∫lo≈æi≈°tƒõ pln√©?)."); }
        }

        // --- UI FUNCTIONS ---
        function saveAnalysis(event) {
            event.preventDefault();
            const nazev_dila = document.getElementById('nazev_dila').value.trim();
            const autor = document.getElementById('autor').value.trim();
            const editIndex = document.getElementById('edit-index').value;

            if (!nazev_dila || !autor) {
                alertMessage('Vypl≈àte N√°zev d√≠la a Autora.');
                return;
            }

            const analysisData = {
                title: nazev_dila,
                author: autor,
                literarni_druh: document.getElementById('literarni_druh').value,
                literarni_zanr: document.getElementById('literarni_zanr').value,
                kontext_autora: document.getElementById('kontext_autora').value,
                hlavni_tema: document.getElementById('hlavni_tema').value,
                hlavni_postavy: document.getElementById('hlavni_postavy').value,
                vypravec: document.getElementById('vypravec').value,
                casoprostor: document.getElementById('casoprostor').value,
                dej: document.getElementById('dej').value,
                myslenkovy_obsah: document.getElementById('myslenkovy_obsah').value,
                clneni_textu: document.getElementById('clneni_textu').value,
                slohove_postupy: document.getElementById('slohove_postupy').value,
                kompozicni_postupy: document.getElementById('kompozicni_postupy').value,
                kompozicni_principy: document.getElementById('kompozicni_principy').value,
                neverbalni: document.getElementById('neverbalni').value,
                verbalni: document.getElementById('verbalni').value,
                figury_tropy: document.getElementById('figury_tropy').value,
                analyza: document.getElementById('analyza').value,
                vyklad: document.getElementById('vyklad').value,
                hodnoceni: document.getElementById('hodnoceni').value,
            };

            if (editIndex !== "") {
                storedAnalyses[parseInt(editIndex)] = analysisData;
                alertMessage(`Aktualizov√°no: ${analysisData.title}`);
            } else {
                storedAnalyses.push(analysisData);
                alertMessage(`Ulo≈æeno: ${analysisData.title}`);
            }
            saveAnalyses();
            renderReviewList();
            resetForm();
        }

        window.removeAnalysis = (index) => {
            if (confirm("Smazat tento rozbor?")) {
                storedAnalyses.splice(index, 1);
                saveAnalyses();
                renderReviewList();
            }
        }

        window.clearAll = () => {
            if (confirm("Smazat V≈†ECHNA data?")) {
                storedAnalyses = [];
                saveAnalyses();
                renderReviewList();
            }
        }

        window.editAnalysis = (index) => {
            const data = storedAnalyses[index];
            if (!data) return;
            document.getElementById('edit-index').value = index;
            
            const fields = ['nazev_dila', 'autor', 'literarni_druh', 'literarni_zanr', 'kontext_autora', 
                            'hlavni_tema', 'hlavni_postavy', 'vypravec', 'casoprostor', 'dej', 
                            'myslenkovy_obsah', 'clneni_textu', 'slohove_postupy', 'kompozicni_postupy', 
                            'kompozicni_principy', 'neverbalni', 'verbalni', 'figury_tropy', 
                            'analyza', 'vyklad', 'hodnoceni'];
            
            fields.forEach(id => {
                const el = document.getElementById(id);
                if(el) el.value = data[id === 'nazev_dila' ? 'title' : (id === 'autor' ? 'author' : id)] || '';
            });

            alertMessage(`Naƒçteno: ${data.title}`);
            window.scrollTo(0, 0);
        }

        window.resetForm = () => {
            document.getElementById('analysis-form').reset();
            document.getElementById('edit-index').value = '';
        }

        function renderReviewList() {
            const list = document.getElementById('review-list');
            const countSpan = document.getElementById('count');
            list.innerHTML = '';
            countSpan.textContent = storedAnalyses.length;

            if (storedAnalyses.length === 0) {
                const p = document.createElement('p');
                p.className = 'text-gray-500 p-4 text-center';
                p.textContent = 'Zat√≠m nebyly ulo≈æeny ≈æ√°dn√© rozbory.';
                list.appendChild(p);
                return;
            }

            const sortedAnalyses = [...storedAnalyses].sort((a, b) => a.title.localeCompare(b.title));
            sortedAnalyses.forEach((analysis, i) => {
                const originalIndex = storedAnalyses.findIndex(item => item.title === analysis.title && item.author === analysis.author);
                const item = document.createElement('div');
                item.className = 'review-item';
                item.innerHTML = `
                    <span class="font-medium text-gray-700">${i + 1}. ${analysis.title} (${analysis.author})</span>
                    <div>
                        <button onclick="editAnalysis(${originalIndex})" class="text-blue-500 hover:text-blue-700 font-semibold text-sm mr-2">Edit</button>
                        <button onclick="removeAnalysis(${originalIndex})" class="text-red-500 hover:text-red-700 font-semibold text-sm">Smazat</button>
                    </div>
                `;
                list.appendChild(item);
            });
        }

        // --- LATEX GENERATOR ---
        function esc(text) {
            if (!text) return '-';
            return text.replace(/\\/g, '\\textbackslash{}').replace(/&/g, '\\&').replace(/%/g, '\\%').replace(/\$/g, '\\$').replace(/#/g, '\\#').replace(/_/g, '\\_').replace(/{/g, '\\{').replace(/}/g, '\\}')
                       .replace(/~/g, '\\textasciitilde{}').replace(/\^/g, '\\textasciicircum{}').replace(/\n/g, '\\\\');
        }

        const generateTableSection = (title, items) => {
            const lw = '5cm'; const cw = '11cm'; // lw=Label Width, cw=Content Width
            let table = `\\subsection*{${title}}\n\\begin{center}\n\\begin{tabular}{p{${lw}} p{${cw}}}\n\\toprule\\midrule\n`;
            items.forEach(([t, c]) => { table += `\\textbf{${t}:} & \\parbox[t]{${cw}}{${c || '-'}} \\\\ \n\\midrule\n`; });
            table += `\\bottomrule\n\\end{tabular}\n\\end{center}\n`;
            return table;
        };

        function generateAnalysisBlock(data) {
            return `
\\clearpage
\\section*{Rozbor d√≠la: ${esc(data.title)}}
\\addcontentsline{toc}{section}{${esc(data.title)} (${esc(data.author)})}
\\begin{center}
    \\Large\\bfseries
    CHARAKTERISTIKA, ANAL√ùZA A INTERPRETACE UMƒöLECK√âHO TEXTU
    \\\\
    \\rule{\\textwidth}{1pt}
    \\normalsize
    \\textbf{N√°zev d√≠la:} ${esc(data.title)} \\quad $\\bullet$ \\quad \\textbf{Autor:} ${esc(data.author)}
\\end{center}
\\bigskip

% --- 1. DRUH A ZANR ---
\\subsection*{1. LITER√ÅRN√ç DRUH A ≈Ω√ÅNR}
${generateTableSection('Z√°kladn√≠ za≈ôazen√≠', [['Liter√°rn√≠ druh', esc(data.literarni_druh)], ['Liter√°rn√≠ ≈æ√°nr', esc(data.literarni_zanr)]])}

% --- 2. KONTEXT ---
\\subsection*{2. KONTEXT}
${generateTableSection('Kontext d√≠la', [['Autor, recepce, smƒõr', esc(data.kontext_autora)]])}

% --- 3. OBSAH ---
\\subsection*{3. OBSAH}
\\subsubsection*{A. T√©ma}
${generateTableSection('T√©ma', [['Hlavn√≠ a vedlej≈°√≠ t√©ma', esc(data.hlavni_tema)]])}

\\subsubsection*{B. Vƒõcn√Ω obsah}
${generateTableSection('Vƒõcn√Ω obsah', [
    ['Postavy', esc(data.hlavni_postavy)],
    ['Vypravƒõƒç / Lyr. subjekt', esc(data.vypravec)],
    ['ƒåasoprostor', esc(data.casoprostor)],
    ['Dƒõj/Dƒõn√≠', esc(data.dej)],
    ['My≈°lenkov√Ω a emoƒçn√≠ obsah', esc(data.myslenkovy_obsah)]
])}

% --- 4. FORMA ---
\\subsection*{4. FORMA}
\\subsubsection*{A. Kompozice}
${generateTableSection('Kompozice', [
    ['ƒålenƒõn√≠ textu', esc(data.clneni_textu)],
    ['Slohov√© postupy', esc(data.slohove_postupy)],
    ['Kompoziƒçn√≠ postupy', esc(data.kompozicni_postupy)],
    ['Kompoziƒçn√≠ principy', esc(data.kompozicni_principy)]
])}

\\subsubsection*{B. V√Ωrazov√© prost≈ôedky}
${generateTableSection('V√Ωrazov√© prost≈ôedky', [
    ['Neverb√°ln√≠', esc(data.neverbalni)],
    ['Verb√°ln√≠ (jazyk)', esc(data.verbalni)],
    ['Figury a Tropy', esc(data.figury_tropy)]
])}

% --- 5. KOMENT√Å≈ò ---
\\subsection*{5. KOMENT√Å≈ò (Jak o textu p≈ôem√Ω≈°let)}
${generateTableSection('Koment√°≈ô', [
    ['Anal√Ωza (rozklad)', esc(data.analyza)],
    ['V√Ωklad (smysl/v√Ωznam)', esc(data.vyklad)],
    ['Hodnocen√≠', esc(data.hodnoceni)]
])}
\\vspace{1cm}
\\rule{\\textwidth}{0.2pt} 
`;
        }

        window.generateFinalLatex = () => {
            if (storedAnalyses.length === 0) { alertMessage('≈Ω√°dn√© rozbory k ulo≈æen√≠.'); return; }
            const sorted = [...storedAnalyses].sort((a, b) => a.title.localeCompare(b.title));
            const content = sorted.map(generateAnalysisBlock).join('');
            
            const latex = `\\documentclass[11pt, a4paper]{article}
\\usepackage[a4paper, top=2.5cm, bottom=2.5cm, left=2cm, right=2cm]{geometry}
\\usepackage{fontspec}
\\usepackage[czech, bidi=basic, provide=*]{babel}
\\babelprovide[import, onchar=ids fonts]{czech}
\\babelfont{rm}{Noto Sans}
\\usepackage{parskip, booktabs, fancyhdr, hyperref}
\\hypersetup{colorlinks=true, linkcolor=blue, filecolor=magenta, urlcolor=cyan, pdftitle={Maturitn√≠ Sborn√≠k}}
\\pagestyle{fancy} \\fancyhead[L]{\\nouppercase{\\rightmark}} \\fancyhead[R]{\\thepage} \\fancyfoot{}
\\setlength{\\headheight}{13.6pt}

\\begin{document}
\\begin{titlepage} \\centering \\vspace*{3cm}
{\\Huge \\bfseries MATURITN√ç SOUBOR DƒöL} \\\\[1.5cm]
{\\huge \\bfseries Dle struktury: Text a jeho slo≈æky / Koment√°≈ô} \\\\[3cm]
{\\large Vypracoval: ...}
\\end{titlepage}
\\clearpage \\tableofcontents \\clearpage

\\section*{Seznam Dƒõl}
\\begin{enumerate}
${sorted.map(a => `\\item \\textbf{${esc(a.title)}} (${esc(a.author)})`).join('\n')}
\\end{enumerate}
\\clearpage

${content}
\\end{document}`;
            
            document.getElementById('result-text').value = latex.trim();
            document.getElementById('result-modal').style.display = 'flex';
        }

        // --- INIT ---
        document.getElementById('analysis-form').addEventListener('submit', saveAnalysis);
        document.addEventListener('DOMContentLoaded', loadAnalyses);
        
        function copyResultText() {
            document.getElementById('result-text').select();
            document.execCommand('copy');
            alertMessage("Zkop√≠rov√°no!");
        }

        function alertMessage(msg) {
            const div = document.createElement('div');
            div.className = 'fixed right-8 top-8 bg-green-100 border-l-4 border-green-500 text-green-700 p-4 shadow-lg z-50';
            div.textContent = msg;
            document.body.appendChild(div);
            setTimeout(() => div.remove(), 3000);
        }
        
        window.closeModal = () => document.getElementById('result-modal').style.display = 'none';
        window.onclick = (e) => { if(e.target == document.getElementById('result-modal')) closeModal(); }
    </script>
</body>
</html>
